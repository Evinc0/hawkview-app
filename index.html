<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>HAWKVIEW - Revolutionary AI Shopping Assistant</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- iOS App Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="HAWKVIEW">
    <link rel="apple-touch-icon" href="HAWKVIEW LOGO.png">
    <meta name="theme-color" content="#F0C55F">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
            min-height: 100vh;
            color: #F0C55F;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.5s ease-in-out;
        }
        
        .screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .screen.visible {
            opacity: 1;
            pointer-events: all;
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            background: #F0C55F;
            border-radius: 50%;
            opacity: 0.4;
            animation: floatEnhanced 20s infinite linear;
        }
        
        @keyframes floatEnhanced {
            0% {
                transform: translateY(100vh) translateX(0px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            50% {
                transform: translateY(50vh) translateX(20px) rotate(180deg);
            }
            90% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-100px) translateX(-20px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .video-border {
            background: linear-gradient(45deg, #F0C55F, #d4af37, #F0C55F);
            padding: 4px;
            border-radius: 20px;
            box-shadow: 
                0 0 40px rgba(240, 197, 95, 0.4),
                0 0 80px rgba(240, 197, 95, 0.2);
            animation: glow 3s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 
                    0 0 40px rgba(240, 197, 95, 0.4),
                    0 0 80px rgba(240, 197, 95, 0.2);
            }
            to {
                box-shadow: 
                    0 0 60px rgba(240, 197, 95, 0.6),
                    0 0 120px rgba(240, 197, 95, 0.3);
            }
        }
        
        .title-shimmer {
            background: linear-gradient(45deg, #F0C55F, #fff, #F0C55F, #d4af37);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .feature-card {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(240, 197, 95, 0.08));
            border: 2px solid rgba(240, 197, 95, 0.6);
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
            padding: 1.25rem;
            margin: 0.75rem;
            max-width: 280px;
        }
        
        .feature-card:hover {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.75), rgba(240, 197, 95, 0.15));
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(240, 197, 95, 0.4);
            border-color: rgba(240, 197, 95, 0.8);
        }
        
        .feature-card h3 {
            color: #F0C55F;
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }
        
        .feature-card p {
            color: #F5F5DC !important;
            opacity: 0.95 !important;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .install-btn, .auth-btn, .main-btn {
            background: linear-gradient(45deg, #F0C55F, #FFD700);
            color: #000;
            transition: all 0.3s ease;
            min-height: 44px;
            border: none;
            cursor: pointer;
        }
        
        .install-btn:hover, .auth-btn:hover, .main-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(240, 197, 95, 0.4);
        }
        
        .install-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .auth-btn-outline {
            background: transparent;
            color: #F0C55F;
            border: 2px solid #F0C55F;
            transition: all 0.3s ease;
        }
        
        .auth-btn-outline:hover {
            background: #F0C55F;
            color: #000;
            transform: translateY(-2px);
        }
        
        .form-input {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(240, 197, 95, 0.3);
            color: #F0C55F;
            padding: 12px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #F0C55F;
            box-shadow: 0 0 20px rgba(240, 197, 95, 0.3);
        }
        
        .form-input::placeholder {
            color: rgba(240, 197, 95, 0.6);
        }
        
        .nav-tab {
            background: rgba(240, 197, 95, 0.1);
            border: 2px solid rgba(240, 197, 95, 0.3);
            color: #F0C55F;
            padding: 12px 24px;
            border-radius: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .nav-tab.active {
            background: linear-gradient(45deg, #F0C55F, #FFD700);
            color: #000;
            border-color: #F0C55F;
        }
        
        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(240, 197, 95, 0.3);
        }
        
        .features-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .w-full.max-w-4xl {
            max-width: 600px !important;
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .features-container {
                max-width: 90vw !important;
                width: 350px !important;
                margin: 0 auto !important;
                padding: 0 5vw !important;
            }
            
            .feature-grid {
                max-width: 350px !important;
                width: 100% !important;
                grid-template-columns: 1fr !important;
                gap: 15px !important;
                justify-items: center !important;
            }
            
            .feature-card {
                max-width: 90vw !important;
                width: 320px !important;
                margin: 0 auto !important;
                padding: 1rem !important;
            }
            
            .feature-card h3 {
                font-size: 1rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .feature-card p {
                font-size: 0.8rem !important;
                line-height: 1.4 !important;
            }
            
            .video-container {
                max-width: 98vw;
                margin: 5px auto;
            }
            
            .title-size {
                font-size: clamp(2rem, 6vw, 4rem);
            }
            
            .subtitle-size {
                font-size: clamp(1rem, 3vw, 1.5rem);
            }
        }
        
        @media (min-width: 769px) {
            .video-container {
                max-width: 600px;
            }
            
            .title-size {
                font-size: 4rem;
            }
            
            .subtitle-size {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <!-- SPLASH SCREEN -->
    <div id="splashScreen" class="screen visible">
        <div class="min-h-screen flex flex-col items-center px-4">
            <!-- Video Section -->
            <div class="video-container w-full mt-4 mb-8">
                <div class="video-border">
                    <div class="relative w-full" style="padding-bottom: 56.25%; border-radius: 16px; overflow: hidden; background: #000;">
                        <video id="hawkviewVideo" class="absolute top-0 left-0 w-full h-full object-cover" style="border-radius: 16px;" autoplay muted loop playsinline webkit-playsinline preload="metadata">
                            <source src="hawkview_logo.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>
            
            <!-- Title Section -->
            <div class="text-center mb-8">
                <h1 class="title-shimmer title-size font-black tracking-wider mb-4">HAWKVIEW</h1>
                <p class="subtitle-size font-normal tracking-wide">Revolutionary AI Shopping Assistant</p>
            </div>
            
            <!-- Features Grid -->
            <div class="features-container">
                <div class="w-full max-w-4xl feature-grid grid md:grid-cols-2 gap-6 mb-8">
                    <div class="feature-card rounded-2xl text-center">
                        <div class="text-3xl mb-3">ü§ñ</div>
                        <h3 class="font-bold">AI-Powered Intelligence</h3>
                        <p>Advanced machine learning algorithms that understand your shopping preferences with unprecedented accuracy.</p>
                    </div>
                    
                    <div class="feature-card rounded-2xl text-center">
                        <div class="text-3xl mb-3">üîç</div>
                        <h3 class="font-bold">Smart Product Discovery</h3>
                        <p>Instantly find the best deals across thousands of retailers with our intelligent search engine.</p>
                    </div>
                    
                    <div class="feature-card rounded-2xl text-center">
                        <div class="text-3xl mb-3">‚≠ê</div>
                        <h3 class="font-bold">Premium Experience</h3>
                        <p>Enjoy a seamless, luxury shopping experience with real-time price tracking and exclusive deals.</p>
                    </div>
                    
                    <div class="feature-card rounded-2xl text-center">
                        <div class="text-3xl mb-3">‚ö°</div>
                        <h3 class="font-bold">Lightning Performance</h3>
                        <p>Get instant results with our optimized algorithms and cloud-based infrastructure.</p>
                    </div>
                </div>
            </div>
            
            <!-- Install Button -->
            <div class="w-full max-w-md mb-8">
                <button id="installBtn" class="install-btn w-full py-4 px-8 rounded-full font-bold text-lg tracking-wide" onclick="installHawkview()">
                    <i class="fas fa-download mr-2"></i>Install HAWKVIEW
                </button>
            </div>
        </div>
    </div>
    
    <!-- AUTHENTICATION SCREEN -->
    <div id="authScreen" class="screen hidden">
        <div class="min-h-screen flex flex-col items-center justify-center px-4">
            <!-- Animated Logo -->
            <div class="video-container w-full max-w-sm mb-8">
                <div class="video-border">
                    <div class="relative w-full" style="padding-bottom: 56.25%; border-radius: 16px; overflow: hidden; background: #000;">
                        <video class="absolute top-0 left-0 w-full h-full object-cover" style="border-radius: 16px;" autoplay muted loop playsinline webkit-playsinline>
                            <source src="hawkview_logo.mp4" type="video/mp4">
                        </video>
                    </div>
                </div>
            </div>
            
            <!-- Title -->
            <div class="text-center mb-8">
                <h1 class="title-shimmer text-4xl font-black tracking-wider mb-4">HAWKVIEW</h1>
                <p class="text-lg font-normal text-yellow-300 tracking-wide">Welcome to Your Shopping Revolution</p>
            </div>
            
            <!-- Auth Options -->
            <div id="authOptions" class="w-full max-w-md space-y-4">
                <button onclick="guestAccess()" class="auth-btn w-full py-4 px-8 rounded-full font-bold text-lg">
                    <i class="fas fa-user mr-2"></i>Continue as Guest
                </button>
                <button onclick="showSignUp()" class="auth-btn-outline w-full py-4 px-8 rounded-full font-bold text-lg">
                    <i class="fas fa-user-plus mr-2"></i>Create Account
                </button>
                <button onclick="showSignIn()" class="auth-btn-outline w-full py-4 px-8 rounded-full font-bold text-lg">
                    <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                </button>
            </div>
            
            <!-- Sign Up Form -->
            <div id="signUpForm" class="w-full max-w-md space-y-4 hidden">
                <h3 class="text-xl font-bold text-center mb-6">Create Your Account</h3>
                <input type="email" id="signUpEmail" class="form-input w-full" placeholder="Email Address" required>
                <input type="password" id="signUpPassword" class="form-input w-full" placeholder="Password" required>
                <input type="password" id="signUpConfirm" class="form-input w-full" placeholder="Confirm Password" required>
                <button onclick="handleSignUp()" class="auth-btn w-full py-3 px-6 rounded-full font-bold">
                    <i class="fas fa-user-plus mr-2"></i>Create Account
                </button>
                <button onclick="backToAuth()" class="auth-btn-outline w-full py-3 px-6 rounded-full font-bold">
                    <i class="fas fa-arrow-left mr-2"></i>Back
                </button>
            </div>
            
            <!-- Sign In Form -->
            <div id="signInForm" class="w-full max-w-md space-y-4 hidden">
                <h3 class="text-xl font-bold text-center mb-6">Sign In</h3>
                <input type="email" id="signInEmail" class="form-input w-full" placeholder="Email Address" required>
                <input type="password" id="signInPassword" class="form-input w-full" placeholder="Password" required>
                <div class="flex items-center">
                    <input type="checkbox" id="rememberMe" class="mr-2">
                    <label for="rememberMe" class="text-sm">Remember Me</label>
                </div>
                <button onclick="handleSignIn()" class="auth-btn w-full py-3 px-6 rounded-full font-bold">
                    <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                </button>
                <button onclick="backToAuth()" class="auth-btn-outline w-full py-3 px-6 rounded-full font-bold">
                    <i class="fas fa-arrow-left mr-2"></i>Back
                </button>
            </div>
        </div>
    </div>
    
    <!-- MAIN APP SCREEN -->
    <div id="mainAppScreen" class="screen hidden">
        <div class="min-h-screen flex flex-col">
            <!-- Top Bar -->
            <div class="p-4 border-b border-yellow-400 border-opacity-30">
                <div class="flex items-center justify-between">
                    <h2 class="title-shimmer text-2xl font-bold">HAWKVIEW</h2>
                    <button onclick="logout()" class="text-sm text-yellow-400 hover:text-yellow-300">
                        <i class="fas fa-sign-out-alt mr-1"></i>Logout
                    </button>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <div class="flex justify-center space-x-4 p-4">
                <button class="nav-tab active" onclick="showTab('scan')">
                    <i class="fas fa-camera mr-2"></i>Scan
                </button>
                <button class="nav-tab" onclick="showTab('profile')">
                    <i class="fas fa-user mr-2"></i>Profile
                </button>
                <div id="adminTab" class="hidden">
                    <button class="nav-tab" onclick="showTab('admin')">
                        <i class="fas fa-cog mr-2"></i>Admin
                    </button>
                </div>
            </div>
            
            <!-- Tab Content -->
            <div class="flex-1 p-4">
                <!-- Scan Tab -->
                <div id="scanTab" class="tab-content">
                    <div class="text-center">
                        <h3 class="text-xl font-bold mb-4">Product Scanner</h3>
                        <p class="mb-6">Point your camera at any product to get instant information and pricing</p>
                        
                        <div class="border-2 border-dashed border-yellow-400 border-opacity-50 rounded-lg p-8 mb-6">
                            <div class="text-6xl mb-4">üì∑</div>
                            <p class="mb-4">Camera access required for scanning</p>
                            <button onclick="startCamera()" class="main-btn py-3 px-8 rounded-full font-bold">
                                <i class="fas fa-camera mr-2"></i>Start Camera
                            </button>
                        </div>
                        
                        <div id="userFeatures" class="hidden">
                            <h4 class="font-bold mb-2">Premium Features Available:</h4>
                            <ul class="text-left space-y-2">
                                <li>‚Ä¢ Price comparison across retailers</li>
                                <li>‚Ä¢ Purchase history tracking</li>
                                <li>‚Ä¢ AI-powered recommendations</li>
                                <li>‚Ä¢ Advanced analytics</li>
                            </ul>
                        </div>
                        
                        <div id="guestLimitations" class="hidden">
                            <div class="bg-yellow-900 bg-opacity-20 border border-yellow-400 rounded-lg p-4 mt-4">
                                <h4 class="font-bold mb-2">Guest Limitations:</h4>
                                <p class="text-sm">Basic scanning only. Create an account for full features!</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Profile Tab -->
                <div id="profileTab" class="tab-content hidden">
                    <div class="text-center">
                        <h3 class="text-xl font-bold mb-6">Profile Settings</h3>
                        
                        <div class="space-y-4 max-w-md mx-auto">
                            <div class="bg-black bg-opacity-50 border border-yellow-400 border-opacity-30 rounded-lg p-4">
                                <div class="text-left">
                                    <p><strong>User Type:</strong> <span id="userTypeDisplay">Guest</span></p>
                                    <p><strong>Email:</strong> <span id="emailDisplay">Not signed in</span></p>
                                </div>
                            </div>
                            
                            <div id="userOnlyFeatures" class="hidden space-y-4">
                                <button class="auth-btn-outline w-full py-3 px-6 rounded-full font-bold">
                                    <i class="fas fa-history mr-2"></i>Purchase History
                                </button>
                                <button class="auth-btn-outline w-full py-3 px-6 rounded-full font-bold">
                                    <i class="fas fa-chart-bar mr-2"></i>Analytics
                                </button>
                                <button onclick="resetUserData()" class="auth-btn-outline w-full py-3 px-6 rounded-full font-bold text-red-400 border-red-400 hover:bg-red-400 hover:text-white">
                                    <i class="fas fa-trash mr-2"></i>Reset Data
                                </button>
                            </div>
                            
                            <div id="guestOnlyMessage" class="bg-yellow-900 bg-opacity-20 border border-yellow-400 rounded-lg p-4">
                                <p class="text-sm">Sign up to access advanced features and save your preferences!</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Admin Tab -->
                <div id="adminTab" class="tab-content hidden">
                    <div class="text-center">
                        <h3 class="text-xl font-bold mb-6">Admin Panel</h3>
                        
                        <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                            <div class="bg-black bg-opacity-50 border border-yellow-400 border-opacity-30 rounded-lg p-4">
                                <div class="text-2xl mb-2">üë•</div>
                                <div class="text-lg font-bold">Users</div>
                                <div class="text-sm opacity-75">Manage accounts</div>
                            </div>
                            
                            <div class="bg-black bg-opacity-50 border border-yellow-400 border-opacity-30 rounded-lg p-4">
                                <div class="text-2xl mb-2">üìä</div>
                                <div class="text-lg font-bold">Analytics</div>
                                <div class="text-sm opacity-75">Usage statistics</div>
                            </div>
                            
                            <div class="bg-black bg-opacity-50 border border-yellow-400 border-opacity-30 rounded-lg p-4">
                                <div class="text-2xl mb-2">‚öôÔ∏è</div>
                                <div class="text-lg font-bold">Settings</div>
                                <div class="text-sm opacity-75">System config</div>
                            </div>
                            
                            <div class="bg-black bg-opacity-50 border border-yellow-400 border-opacity-30 rounded-lg p-4">
                                <div class="text-2xl mb-2">üîß</div>
                                <div class="text-lg font-bold">Tools</div>
                                <div class="text-sm opacity-75">Admin utilities</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let deferredPrompt;
        let currentUser = null;
        let userType = 'guest';
        
        // Screen Management
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('visible');
                screen.classList.add('hidden');
            });
            
            document.getElementById(screenId).classList.remove('hidden');
            document.getElementById(screenId).classList.add('visible');
        }
        
        // Particles Animation
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = window.innerWidth < 768 ? 60 : 100;
            
            particlesContainer.innerHTML = '';
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const sizeType = Math.random();
                let size;
                if (sizeType < 0.3) {
                    size = Math.random() * 2 + 1;
                } else if (sizeType < 0.7) {
                    size = Math.random() * 3 + 2;
                } else {
                    size = Math.random() * 4 + 3;
                }
                
                const startX = Math.random() * window.innerWidth;
                const duration = Math.random() * 10 + 15;
                const delay = Math.random() * 20;
                
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = startX + 'px';
                particle.style.animationDuration = duration + 's';
                particle.style.animationDelay = delay + 's';
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // PWA Install Functionality
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
        });
        
        async function installHawkview() {
            const btn = document.getElementById('installBtn');
            
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Installing...';
            
            try {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (outcome === 'accepted') {
                        showInstallSuccess();
                    } else {
                        showInstallInstructions();
                    }
                    deferredPrompt = null;
                } else {
                    showInstallInstructions();
                }
            } catch (error) {
                console.log('Install error:', error);
                showInstallInstructions();
            }
        }
        
        function showInstallSuccess() {
            const btn = document.getElementById('installBtn');
            const deviceType = getDeviceType();
            
            let instruction = '';
            if (deviceType === 'iOS') {
                instruction = 'Find HAWKVIEW on your Home Screen';
            } else if (deviceType === 'Android') {
                instruction = 'Find HAWKVIEW in your App Drawer';
            } else {
                instruction = 'Find HAWKVIEW in your Applications';
            }
            
            btn.innerHTML = instruction;
            
            setTimeout(() => {
                showScreen('authScreen');
            }, 2000);
        }
        
        function showInstallInstructions() {
            const btn = document.getElementById('installBtn');
            const deviceType = getDeviceType();
            
            let instruction = '';
            if (deviceType === 'iOS') {
                instruction = 'Find HAWKVIEW on your Home Screen';
            } else if (deviceType === 'Android') {
                instruction = 'Find HAWKVIEW in your App Drawer';
            } else {
                instruction = 'Find HAWKVIEW in your Applications';
            }
            
            btn.innerHTML = instruction;
            
            setTimeout(() => {
                showScreen('authScreen');
            }, 3000);
        }
        
        function getDeviceType() {
            const userAgent = navigator.userAgent;
            if (/iPad|iPhone|iPod/.test(userAgent)) return 'iOS';
            if (/Android/.test(userAgent)) return 'Android';
            return 'Desktop';
        }
        
        // Authentication Functions
        function guestAccess() {
            userType = 'guest';
            currentUser = { email: 'Guest User', type: 'guest' };
            showMainApp();
        }
        
        function showSignUp() {
            document.getElementById('authOptions').classList.add('hidden');
            document.getElementById('signUpForm').classList.remove('hidden');
        }
        
        function showSignIn() {
            document.getElementById('authOptions').classList.add('hidden');
            document.getElementById('signInForm').classList.remove('hidden');
        }
        
        function backToAuth() {
            document.getElementById('authOptions').classList.remove('hidden');
            document.getElementById('signUpForm').classList.add('hidden');
            document.getElementById('signInForm').classList.add('hidden');
        }
        
        function handleSignUp() {
            const email = document.getElementById('signUpEmail').value;
            const password = document.getElementById('signUpPassword').value;
            const confirm = document.getElementById('signUpConfirm').value;
            
            if (!email || !password || !confirm) {
                alert('Please fill in all fields');
                return;
            }
            
            if (!email.includes('@')) {
                alert('Please enter a valid email address');
                return;
            }
            
            if (password !== confirm) {
                alert('Passwords do not match');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters');
                return;
            }
            
            // Save user data
            const userData = { email, password, type: 'user' };
            localStorage.setItem('hawkview_user_' + email, JSON.stringify(userData));
            
            userType = 'user';
            currentUser = userData;
            showMainApp();
        }
        
        function handleSignIn() {
            const email = document.getElementById('signInEmail').value;
            const password = document.getElementById('signInPassword').value;
            const remember = document.getElementById('rememberMe').checked;
            
            if (!email || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            // Check admin credentials
            if (email === 'admin@hawkview.com' && password === 'hawkview2025') {
                userType = 'admin';
                currentUser = { email, type: 'admin' };
                showMainApp();
                return;
            }
            
            // Check regular user credentials
            const storedUser = localStorage.getItem('hawkview_user_' + email);
            if (storedUser) {
                const userData = JSON.parse(storedUser);
                if (userData.password === password) {
                    userType = 'user';
                    currentUser = userData;
                    if (remember) {
                        localStorage.setItem('hawkview_remember', email);
                    }
                    showMainApp();
                    return;
                }
            }
            
            alert('Invalid email or password');
        }
        
        function showMainApp() {
            showScreen('mainAppScreen');
            updateUserInterface();
        }
        
        function updateUserInterface() {
            document.getElementById('userTypeDisplay').textContent = 
                userType === 'guest' ? 'Guest' :
                userType === 'admin' ? 'Administrator' : 'Registered User';
            
            document.getElementById('emailDisplay').textContent = currentUser.email;
            
            if (userType === 'user') {
                document.getElementById('userFeatures').classList.remove('hidden');
                document.getElementById('userOnlyFeatures').classList.remove('hidden');
                document.getElementById('guestLimitations').classList.add('hidden');
                document.getElementById('guestOnlyMessage').classList.add('hidden');
            } else if (userType === 'admin') {
                document.getElementById('userFeatures').classList.remove('hidden');
                document.getElementById('userOnlyFeatures').classList.remove('hidden');
                document.getElementById('adminTab').classList.remove('hidden');
                document.getElementById('guestLimitations').classList.add('hidden');
                document.getElementById('guestOnlyMessage').classList.add('hidden');
            } else {
                document.getElementById('guestLimitations').classList.remove('hidden');
                document.getElementById('guestOnlyMessage').classList.remove('hidden');
                document.getElementById('userFeatures').classList.add('hidden');
                document.getElementById('userOnlyFeatures').classList.add('hidden');
            }
        }
        
        // Tab Management
        function showTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
        }
        
        // App Functions
        function startCamera() {
            alert('Camera functionality would be implemented here. This would access the device camera for product scanning.');
        }
        
        function resetUserData() {
            if (confirm('Are you sure you want to reset all your data? This cannot be undone.')) {
                if (currentUser && currentUser.email !== 'Guest User') {
                    localStorage.removeItem('hawkview_user_' + currentUser.email);
                }
                alert('Data reset successfully!');
                logout();
            }
        }
        
        function logout() {
            localStorage.removeItem('hawkview_remember');
            currentUser = null;
            userType = 'guest';
            showScreen('splashScreen');
        }
        
        // Initialize
        window.addEventListener('load', () => {
            createParticles();
            
            // Check for remembered user
            const remembered = localStorage.getItem('hawkview_remember');
            if (remembered) {
                const storedUser = localStorage.getItem('hawkview_user_' + remembered);
                if (storedUser) {
                    currentUser = JSON.parse(storedUser);
                    userType = 'user';
                    showMainApp();
                    return;
                }
            }
        });
        
        window.addEventListener('resize', () => {
            createParticles();
        });
    </script>
